import{d as Y,J as G,K as H,L as I,M as W,N as X,O as Z,P as ee,Q as ne,R as te,S as se,T as oe}from"../modules/unplugin-icons-B6SFEeCH.js";import{d as M,t as h,V as le,aD as ae,o as g,b as V,f as re,h as z,C as e,c as x,k as o,l as t,i as l,e as u,x as ie,aq as m,aE as ue,F as de,ab as ce,ar as b,g as L}from"../modules/vue-UJDA7d7R.js";import{L as pe}from"../modules/shiki-BECBImjN.js";import{u as _e}from"./DrawingPreview.vue_vue_type_script_setup_true_lang-BBi5GH5m.js";import{_ as a,V as D}from"./play-CNOaURVX.js";import"../index-l-CGJUJW.js";import"./context-DuvWAJMT.js";import"./PrintStyle.vue_vue_type_script_setup_true_lang-ZtJ6LNLy.js";const me=M({__name:"Draggable",props:{storageKey:{},initial:{}},setup($){const d=$,w=h(null),f=d.initial??{x:0,y:0},k=d.storageKey?le(d.storageKey,f):h(f),{style:y}=ae(w,{initialValue:k});return(v,c)=>(g(),V("div",{ref_key:"el",ref:w,class:"fixed",style:z(e(y))},[re(v.$slots,"default")],4))}}),ge={class:"flex bg-main p-2"},we={class:"inline-block w-7 text-center"},fe={class:"pt-.5"},Le=M({__name:"DrawingControls",setup($){const{brush:d,canClear:w,canRedo:f,canUndo:k,clear:y,drauu:v,drawingEnabled:c,drawingMode:r,drawingPinned:i,brushColors:B}=_e();function S(){v.undo()}function E(){v.redo()}let C="stylus";function p(_){r.value=_,c.value=!0,_!=="eraseLine"&&(C=_)}function K(_){d.color=_,c.value=!0,r.value=C}return(_,n)=>{const N=Y,R=G,U=H,P=I,A=W,F=X,T=Z,j=ee,q=ne,J=te,O=se,Q=oe;return e(c)||e(i)?(g(),x(me,{key:0,class:l(["flex flex-wrap text-xl p-2 gap-1 rounded-md bg-main shadow transition-opacity duration-200 z-20 border border-main",!e(c)&&e(i)?"opacity-40 hover:opacity-90":""]),"storage-key":"slidev-drawing-pos","initial-x":10,"initial-y":10},{default:o(()=>[t(a,{title:"Draw with stylus",class:l({shallow:e(r)!=="stylus"}),onClick:n[0]||(n[0]=s=>p("stylus"))},{default:o(()=>[t(N)]),_:1},8,["class"]),t(a,{title:"Draw a line",class:l({shallow:e(r)!=="line"}),onClick:n[1]||(n[1]=s=>p("line"))},{default:o(()=>n[13]||(n[13]=[u("svg",{width:"1em",height:"1em",class:"-mt-0.5",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[u("path",{d:"M21.71 3.29a1 1 0 0 0-1.42 0l-18 18a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0l18-18a1 1 0 0 0 0-1.42z",fill:"currentColor"})],-1)])),_:1},8,["class"]),t(a,{title:"Draw an arrow",class:l({shallow:e(r)!=="arrow"}),onClick:n[2]||(n[2]=s=>p("arrow"))},{default:o(()=>[t(R)]),_:1},8,["class"]),t(a,{title:"Draw an ellipse",class:l({shallow:e(r)!=="ellipse"}),onClick:n[3]||(n[3]=s=>p("ellipse"))},{default:o(()=>[t(U)]),_:1},8,["class"]),t(a,{title:"Draw a rectangle",class:l({shallow:e(r)!=="rectangle"}),onClick:n[4]||(n[4]=s=>p("rectangle"))},{default:o(()=>[t(P)]),_:1},8,["class"]),t(a,{title:"Erase",class:l({shallow:e(r)!=="eraseLine"}),onClick:n[5]||(n[5]=s=>p("eraseLine"))},{default:o(()=>[t(A)]),_:1},8,["class"]),t(D),t(e(pe),null,{popper:o(()=>[u("div",ge,[u("div",we,ie(e(d).size),1),u("div",fe,[m(u("input",{"onUpdate:modelValue":n[6]||(n[6]=s=>e(d).size=s),type:"range",min:"1",max:"15",onChange:n[7]||(n[7]=s=>r.value=e(C))},null,544),[[ue,e(d).size]])])])]),default:o(()=>[t(a,{title:"Adjust stroke width",class:l({shallow:e(r)==="eraseLine"})},{default:o(()=>n[14]||(n[14]=[u("svg",{viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},[u("line",{x1:"2",y1:"15",x2:"22",y2:"4",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round"}),u("line",{x1:"2",y1:"24",x2:"28",y2:"10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),u("line",{x1:"7",y1:"31",x2:"29",y2:"19",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round"})],-1)])),_:1},8,["class"])]),_:1}),(g(!0),V(de,null,ce(e(B),s=>(g(),x(a,{key:s,title:"Set brush color",class:l(e(d).color===s&&e(r)!=="eraseLine"?"active":"shallow"),onClick:ve=>K(s)},{default:o(()=>[u("div",{class:l(["w-6 h-6 transition-all transform border",e(d).color!==s?"rounded-1/2 scale-85 border-white":"rounded-md border-gray-300/50"]),style:z(e(c)?{background:s}:{borderColor:s})},null,6)]),_:2},1032,["class","onClick"]))),128)),t(D),t(a,{title:"Undo",class:l({disabled:!e(k)}),onClick:n[8]||(n[8]=s=>S())},{default:o(()=>[t(F)]),_:1},8,["class"]),t(a,{title:"Redo",class:l({disabled:!e(f)}),onClick:n[9]||(n[9]=s=>E())},{default:o(()=>[t(T)]),_:1},8,["class"]),t(a,{title:"Delete",class:l({disabled:!e(w)}),onClick:n[10]||(n[10]=s=>e(y)())},{default:o(()=>[t(j)]),_:1},8,["class"]),t(D),t(a,{title:e(i)?"Unpin drawing":"Pin drawing",class:l({shallow:!e(i)}),onClick:n[11]||(n[11]=s=>i.value=!e(i))},{default:o(()=>[m(t(q,{class:"transform -rotate-45"},null,512),[[b,e(i)]]),m(t(J,null,null,512),[[b,!e(i)]])]),_:1},8,["title","class"]),e(c)?(g(),x(a,{key:0,title:e(i)?"Drawing pinned":"Drawing unpinned",class:l({shallow:!e(c)}),onClick:n[12]||(n[12]=s=>c.value=!e(c))},{default:o(()=>[m(t(O,null,null,512),[[b,e(i)]]),m(t(Q,null,null,512),[[b,!e(i)]])]),_:1},8,["title","class"])):L("",!0)]),_:1},8,["class"])):L("",!0)}}});export{Le as default};
